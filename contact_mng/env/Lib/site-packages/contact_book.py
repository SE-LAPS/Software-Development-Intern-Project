from model import Contact
from tinydb import TinyDB, Query

db = TinyDB("contacts.json")
contacts_table = db.table("contacts")

def add_contact():
    name = input("Enter Contact Name: ")
    contact_number = input("Enter Contact Number: ")
    email = input("Enter Email Address (optional): ")

    contact = Contact(name, contact_number, email)
    contacts_table.insert(contact.__dict__)
    print(f"Contact '{name}' Added Successfully!")

def view_contacts():
    all_contacts = contacts_table.all()
    for contact in all_contacts:
        print(contact)

def main():
    while True:
        print("\nContact Book Menu:")
        print("1. Add Contact")
        print("2. View Contacts")
        print("3. Exit")
        choice = input("Enter Your Choice: ")

        if choice == "1":
            add_contact()
        elif choice == "2":
            view_contacts()
        elif choice == "3":
            print("Exiting Contact Book... Goodbye!")
            break
        else:
            print("Invalid Choice... Please select 1, 2, or 3.")

if __name__ == "__main__":
    main()
